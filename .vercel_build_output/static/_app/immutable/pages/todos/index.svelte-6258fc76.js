import{W as Y,S as ie,i as de,s as ue,e as g,k as T,c as b,a as O,m as H,d as w,b as a,J as ne,g as G,K as u,X as Z,Y as ce,Z as pe,_ as he,$ as ve,a0 as ae,V as fe,t as me,O as _e,h as ge,a1 as be,p as ke,q as we,o as ye,n as Ee,a2 as xe,E as Ce}from"../../chunks/index-14ffccfa.js";function re(i){const e=i-1;return e*e*e+1}function $(i,{pending:e,error:t,result:n}){let c;async function _(v){const o=c={};v.preventDefault();const p=new FormData(i);e&&e(p,i);try{const h=await fetch(i.action,{method:i.method,headers:{accept:"application/json"},body:p});if(o!==c)return;h.ok?n(h,i):t?t(h,null,i):console.error(await h.text())}catch(h){if(t)t(null,h,i);else throw h}}return i.addEventListener("submit",_),{destroy(){i.removeEventListener("submit",_)}}}function se(i,{delay:e=0,duration:t=400,easing:n=re,start:c=0,opacity:_=0}={}){const v=getComputedStyle(i),o=+v.opacity,p=v.transform==="none"?"":v.transform,h=1-c,l=o*(1-_);return{delay:e,duration:t,easing:n,css:(x,y)=>`
			transform: ${p} scale(${1-h*y});
			opacity: ${o-l*y}
		`}}function Me(i,{from:e,to:t},n={}){const c=getComputedStyle(i),_=c.transform==="none"?"":c.transform,[v,o]=c.transformOrigin.split(" ").map(parseFloat),p=e.left+e.width*v/t.width-(t.left+v),h=e.top+e.height*o/t.height-(t.top+o),{delay:l=0,duration:x=C=>Math.sqrt(C)*120,easing:y=re}=n;return{delay:l,duration:Y(x)?x(Math.sqrt(p*p+h*h)):x,easing:y,css:(C,f)=>{const k=f*p,j=f*h,r=C+f*e.width/t.width,s=C+f*e.height/t.height;return`transform: ${_} translate(${k}px, ${j}px) scale(${r}, ${s});`}}}function oe(i,e,t){const n=i.slice();return n[3]=e[t],n[4]=e,n[5]=t,n}function le(i,e){let t,n,c,_,v,o,p,h,l,x,y,C,f,k,j,r,s,d,B,N,A,V,U,F,z,I,q,R,J,P,K,W=Ce,M,X,Q;function ee(...E){return e[1](e[3],e[4],e[5],...E)}function te(){return e[2](e[3],e[4],e[5])}return{key:i,first:null,c(){t=g("div"),n=g("form"),c=g("input"),v=T(),o=g("input"),h=T(),l=g("button"),C=T(),f=g("form"),k=g("input"),r=T(),s=g("input"),B=T(),N=g("button"),A=T(),V=g("form"),U=g("input"),z=T(),I=g("button"),J=T(),this.h()},l(E){t=b(E,"DIV",{class:!0});var m=O(t);n=b(m,"FORM",{action:!0,method:!0});var L=O(n);c=b(L,"INPUT",{type:!0,name:!0,class:!0}),v=H(L),o=b(L,"INPUT",{type:!0,name:!0,class:!0}),h=H(L),l=b(L,"BUTTON",{class:!0,"aria-label":!0}),O(l).forEach(w),L.forEach(w),C=H(m),f=b(m,"FORM",{class:!0,action:!0,method:!0});var D=O(f);k=b(D,"INPUT",{type:!0,name:!0,class:!0}),r=H(D),s=b(D,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),B=H(D),N=b(D,"BUTTON",{class:!0,"aria-label":!0}),O(N).forEach(w),D.forEach(w),A=H(m),V=b(m,"FORM",{action:!0,method:!0});var S=O(V);U=b(S,"INPUT",{type:!0,name:!0,class:!0}),z=H(S),I=b(S,"BUTTON",{class:!0,"aria-label":!0}),O(I).forEach(w),S.forEach(w),J=H(m),m.forEach(w),this.h()},h(){a(c,"type","hidden"),a(c,"name","uid"),c.value=_=e[3].uid,a(c,"class","svelte-16nsat"),a(o,"type","hidden"),a(o,"name","done"),o.value=p=e[3].done?"":"true",a(o,"class","svelte-16nsat"),a(l,"class","toggle svelte-16nsat"),a(l,"aria-label",x="Mark todo as "+(e[3].done?"not done":"done")),a(n,"action","/todos?_method=PATCH"),a(n,"method","post"),a(k,"type","hidden"),a(k,"name","uid"),k.value=j=e[3].uid,a(k,"class","svelte-16nsat"),a(s,"aria-label","Edit todo"),a(s,"type","text"),a(s,"name","text"),s.value=d=e[3].text,a(s,"class","svelte-16nsat"),a(N,"class","save svelte-16nsat"),a(N,"aria-label","Save todo"),a(f,"class","text svelte-16nsat"),a(f,"action","/todos?_method=PATCH"),a(f,"method","post"),a(U,"type","hidden"),a(U,"name","uid"),U.value=F=e[3].uid,a(U,"class","svelte-16nsat"),a(I,"class","delete svelte-16nsat"),a(I,"aria-label","Delete todo"),I.disabled=q=e[3].pending_delete,a(V,"action","/todos?_method=DELETE"),a(V,"method","post"),a(t,"class","todo svelte-16nsat"),ne(t,"done",e[3].done),this.first=t},m(E,m){G(E,t,m),u(t,n),u(n,c),u(n,v),u(n,o),u(n,h),u(n,l),u(t,C),u(t,f),u(f,k),u(f,r),u(f,s),u(f,B),u(f,N),u(t,A),u(t,V),u(V,U),u(V,z),u(V,I),u(t,J),M=!0,X||(Q=[Z(y=$.call(null,n,{pending:ee})),Z($.call(null,f)),Z(R=$.call(null,V,{pending:te}))],X=!0)},p(E,m){e=E,(!M||m&1&&_!==(_=e[3].uid))&&(c.value=_),(!M||m&1&&p!==(p=e[3].done?"":"true"))&&(o.value=p),(!M||m&1&&x!==(x="Mark todo as "+(e[3].done?"not done":"done")))&&a(l,"aria-label",x),y&&Y(y.update)&&m&1&&y.update.call(null,{pending:ee}),(!M||m&1&&j!==(j=e[3].uid))&&(k.value=j),(!M||m&1&&d!==(d=e[3].text)&&s.value!==d)&&(s.value=d),(!M||m&1&&F!==(F=e[3].uid))&&(U.value=F),(!M||m&1&&q!==(q=e[3].pending_delete))&&(I.disabled=q),R&&Y(R.update)&&m&1&&R.update.call(null,{pending:te}),m&1&&ne(t,"done",e[3].done)},r(){K=t.getBoundingClientRect()},f(){ce(t),W(),pe(t,K)},a(){W(),W=he(t,K,Me,{duration:200})},i(E){M||(E&&ve(()=>{P||(P=ae(t,se,{start:.7},!0)),P.run(1)}),M=!0)},o(E){E&&(P||(P=ae(t,se,{start:.7},!1)),P.run(0)),M=!1},d(E){E&&w(t),E&&P&&P.end(),X=!1,fe(Q)}}}function Te(i){let e,t,n,c,_,v,o,p,h,l=[],x=new Map,y,C,f,k=i[0];const j=r=>r[3].uid;for(let r=0;r<k.length;r+=1){let s=oe(i,k,r),d=j(s);x.set(d,l[r]=le(d,s))}return{c(){e=g("meta"),t=T(),n=g("div"),c=g("h1"),_=me("Todos"),v=T(),o=g("form"),p=g("input"),h=T();for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){const s=_e('[data-svelte="svelte-aw2gey"]',document.head);e=b(s,"META",{name:!0,content:!0}),s.forEach(w),t=H(r),n=b(r,"DIV",{class:!0});var d=O(n);c=b(d,"H1",{});var B=O(c);_=ge(B,"Todos"),B.forEach(w),v=H(d),o=b(d,"FORM",{class:!0,action:!0,method:!0});var N=O(o);p=b(N,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),N.forEach(w),h=H(d);for(let A=0;A<l.length;A+=1)l[A].l(d);d.forEach(w),this.h()},h(){document.title="Todos",a(e,"name","description"),a(e,"content","A todo list app"),a(p,"name","text"),a(p,"aria-label","Add todo"),a(p,"placeholder","+ tap to add a todo"),a(p,"class","svelte-16nsat"),a(o,"class","new svelte-16nsat"),a(o,"action","/todos"),a(o,"method","post"),a(n,"class","todos svelte-16nsat")},m(r,s){u(document.head,e),G(r,t,s),G(r,n,s),u(n,c),u(c,_),u(n,v),u(n,o),u(o,p),u(n,h);for(let d=0;d<l.length;d+=1)l[d].m(n,null);y=!0,C||(f=Z($.call(null,o,{result:He})),C=!0)},p(r,[s]){if(s&1){k=r[0],Ee();for(let d=0;d<l.length;d+=1)l[d].r();l=be(l,s,j,1,r,k,x,n,xe,le,null,oe);for(let d=0;d<l.length;d+=1)l[d].a();ke()}},i(r){if(!y){for(let s=0;s<k.length;s+=1)we(l[s]);y=!0}},o(r){for(let s=0;s<l.length;s+=1)ye(l[s]);y=!1},d(r){w(e),r&&w(t),r&&w(n);for(let s=0;s<l.length;s+=1)l[s].d();C=!1,f()}}}const He=async({form:i})=>{i.reset()};function Ve(i,e,t){let{todos:n}=e;const c=(v,o,p,{data:h})=>{t(0,o[p].done=!!h.get("done"),n)},_=(v,o,p)=>t(0,o[p].pending_delete=!0,n);return i.$$set=v=>{"todos"in v&&t(0,n=v.todos)},[n,c,_]}class je extends ie{constructor(e){super(),de(this,e,Ve,Te,ue,{todos:0})}}export{je as default};
